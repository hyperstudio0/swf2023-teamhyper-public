"use strict";(self.webpackChunk_minimal_kit_cra_ts=self.webpackChunk_minimal_kit_cra_ts||[]).push([[5163],{15163:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(1413),a=n(74165),s=n(4942),o=n(15861),i=n(29439),c=n(65964),u=n(47313),l=n(58467),d=n(47825),g=n(71003),f=n(73428),p=n(51629),m=n(42832),h=n(61689),x=n(47131),Z=n(66835),D=n(57861),y=n(35736),v=n(30127),S=n(14368),w=n(36622),j=n(30404),b=n(95870),C=n(92092),P=n(20056),T=n(52402),k=n(25921),N=n(40056),q=n(78773),I=n(3682),R=n(95935),O=n(76025),E=n(29047),_=n(18274),z=n(46417),B={query:"",categories:[],status:"all",startDate:null,endDate:null},L=[{id:"id",label:"ID",align:"left"},{id:"title",label:"\uc81c\ubaa9",align:"left",width:220},{id:"categories.name",label:"\uce74\ud14c\uace0\ub9ac",align:"center"},{id:"top",label:"\uc0c1\ub2e8\uace0\uc815",align:"center"},{id:"pageView",label:"\ud398\uc774\uc9c0 \ubdf0",align:"center"},{id:"createdTime",label:"\ub4f1\ub85d\uc2dc\uac04",align:"center"},{id:""}],A="\uacf5\uc9c0\uc0ac\ud56d \uad00\ub9ac",F="NOTICE";function W(){var e=(0,w.K$)(),t=e.themeStretch,n=e.systemLanguage,W=e.systemMultilingual,H=e.systemDefaultLanguage,M=(0,k.Ds)().enqueueSnackbar,Q=(0,l.s0)(),U=(0,l.TH)(),V=new URLSearchParams(U.search),G=V.get("page")?Number(V.get("page")):0,K=V.get("size")?Number(V.get("size")):7,$=V.get("query")||"",J=V.get("startTime")||"",Y=V.get("endTime")||"",X=(0,u.useState)(!1),ee=(0,i.Z)(X,2),te=ee[0],ne=ee[1],re=(0,u.useState)(!1),ae=(0,i.Z)(re,2),se=(ae[0],ae[1]),oe=(0,u.useState)(),ie=(0,i.Z)(oe,2),ce=ie[0],ue=ie[1],le=(0,u.useState)(!1),de=(0,i.Z)(le,2),ge=(de[0],de[1]),fe=(0,u.useState)([]),pe=(0,i.Z)(fe,2),me=pe[0],he=pe[1],xe=(0,u.useState)(),Ze=(0,i.Z)(xe,2),De=Ze[0],ye=Ze[1],ve=(0,u.useState)(!1),Se=(0,i.Z)(ve,2),we=Se[0],je=Se[1],be=(0,u.useState)(!1),Ce=(0,i.Z)(be,2),Pe=Ce[0],Te=Ce[1],ke=(0,u.useState)(!1),Ne=(0,i.Z)(ke,2),qe=Ne[0],Ie=Ne[1],Re=(0,u.useState)(!1),Oe=(0,i.Z)(Re,2),Ee=Oe[0],_e=Oe[1],ze=(0,b.x6)({defaultOrderBy:"id",defaultOrder:"desc",defaultRowsPerPage:K,defaultCurrentPage:G}),Be=(0,u.useState)([]),Le=(0,i.Z)(Be,2),Ae=Le[0],Fe=Le[1],We=(0,u.useState)(B),He=(0,i.Z)(We,2),Me=He[0],Qe=He[1],Ue=(0,u.useState)(!1),Ve=(0,i.Z)(Ue,2),Ge=Ve[0],Ke=Ve[1],$e=ze.dense?56:76,Je=!(!Me.startDate||!Me.endDate)&&Me.startDate.getTime()>Me.endDate.getTime(),Ye=function(e){var t=e.inputData,n=e.comparator,r=e.filters,a=e.dateError,s=(r.query,r.status,r.categories),o=r.startDate,i=r.endDate,c=t.map((function(e,t){return[e,t]}));c.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=c.map((function(e){return e[0]}));s.length;a||o&&i&&(t=t.filter((function(e){return(0,E.IO)(e.createdTime)>=(0,E.IO)(o)&&(0,E.IO)(e.createdTime)<=(0,E.IO)(i)})));return t}({inputData:Ae,comparator:(0,b.sQ)(ze.order,ze.orderBy),filters:Me,dateError:Je}),Xe=!!Me.query||!!Me.categories.length||"all"!==Me.status||!!Me.startDate||!!Me.endDate,et=!Ye.length&&Xe||!Ye.length,tt=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),Fe([]),t=void 0,Me.query&&Me.query.length>1&&(t=Me.query),e.next=6,C.l.api.boardPage({type:F,size:ze.rowsPerPage,page:ze.page+1,query:t,startTime:Me.startDate&&!isNaN(Me.startDate.getTime())?Me.startDate.toISOString():void 0,endTime:Me.endDate&&!isNaN(Me.endDate.getTime())?Me.endDate.toISOString():void 0,orderBy:ze.orderBy&&(0,q.W)(JSON.stringify((0,s.Z)({},ze.orderBy,ze.order)))});case 6:n=e.sent,r=n.data,Fe(r.items),ze.setPageMetadata(r.metadata),ne(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(!0),e.prev=1,e.next=4,C.l.api.boardCategories({type:"NOTICE"});case 4:t=e.sent,n=t.data,he(n),at("categoryIds",n||[]),console.log(n,"categories"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:ge(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(!0),e.next=3,C.l.api.boardGet(t);case 3:n=e.sent,r=n.data,ue(r),console.log(r,"board"),se(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=(0,u.useCallback)((function(e,t){ze.setPage(0),Qe((function(n){return(0,r.Z)((0,r.Z)({},n),{},(0,s.Z)({},e,t))}))}),[ze]),st=(0,u.useCallback)((function(){Qe(B),Me.query&&V.set("query",""),Me.startDate&&!isNaN(Me.startDate.getTime())&&V.set("startTime",""),Me.endDate&&!isNaN(Me.endDate.getTime())&&V.set("endTime",""),Q("?".concat(V.toString()))}),[]),ot=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tt(),nt();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){je(!1),Te(!1),Ie(!1),ye(void 0)},ct=function(e){je(!1),Te(!1),Ie(!0),ye(e)},ut=function(e){je(!1),Te(!0),Ie(!1),ye(e)},lt=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.l.api.boardDeleteByIds(t);case 3:n=e.sent,r=n.data,ze.setSelected([]),M(r.message,{variant:"success"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),M(e.t0.message,{variant:"error"});case 13:ot(),Ke(!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}return e.prev=1,e.next=4,C.l.api.boardDelete(t);case 4:n=e.sent,r=n.data,M(r.message,{variant:"success"}),it(),ot(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),M(e.t0.message,{variant:"error"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){console.log(n,"systemLanguage"),console.log(W,"systemMultilingual"),console.log(H,"systemDefaultLanguage"),tt(),nt(),V.set("page",String(ze.page)),V.set("size",String(ze.rowsPerPage)),Me.query&&V.set("query",String(Me.query)),Me.startDate&&!isNaN(Me.startDate.getTime())&&V.set("startTime",Me.startDate.toISOString()),Me.endDate&&!isNaN(Me.endDate.getTime())&&V.set("endTime",Me.endDate.toISOString()),Q("?".concat(V.toString()))}),[ze.rowsPerPage,ze.page,ze.orderBy,ze.order,Me.query,Me.startDate,Me.endDate]),(0,u.useEffect)((function(){if(console.log($,"paramQuery"),console.log(J,"paramStartDate"),console.log(Y,"paramEndDate"),$&&at("query",$),J)try{var e=new Date(decodeURIComponent(J));isNaN(e.getTime())||at("startDate",e)}catch(n){}if(Y)try{var t=new Date(decodeURIComponent(Y));isNaN(t.getTime())||at("endDate",t)}catch(n){}}),[$,J,Y]),(0,u.useEffect)((function(){console.log(De,"selectedId"),De?rt(De):ue(void 0)}),[De]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.ql,{children:(0,z.jsxs)("title",{children:[A," | ",j.m_]})}),(0,z.jsxs)(d.Z,{maxWidth:!t&&"lg",children:[(0,z.jsx)(S.Z,{heading:A,links:[{name:O.W,href:O.H.dashboard.root},{name:A}],action:(0,z.jsx)(g.Z,{onClick:function(){return je(!0),Te(!1),Ie(!1),void ye(void 0)},variant:"contained",startIcon:(0,z.jsx)(y.Z,{icon:"eva:plus-fill"}),children:"\uc0c8\uae00 \uc791\uc131"})}),(0,z.jsxs)(f.Z,{sx:{mt:{xs:3,md:5},mb:{xs:3,md:5}},children:[(0,z.jsx)(N.Z,{filters:Me,onFilters:at,dateError:Je,categoryOptions:me}),Xe&&(0,z.jsx)(_.Z,{filters:Me,onFilters:at,onResetFilters:st,results:ze.metadata.total,sx:{p:2.5,pt:0}}),(0,z.jsxs)(p.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,z.jsx)(b.Z4,{dense:ze.dense,numSelected:ze.selected.length,rowCount:Ae.length,onSelectAllRows:function(e){return ze.onSelectAllRows(e,Ae.map((function(e){return e.id})))},action:(0,z.jsxs)(m.Z,{direction:"row",children:[(0,z.jsx)(h.Z,{title:"\ubcf5\uc81c\ud558\uae30",children:(0,z.jsx)(x.Z,{color:"primary",onClick:function(){return M("\ubcf5\uc81c")},children:(0,z.jsx)(y.Z,{icon:"tabler:copy"})})}),(0,z.jsx)(h.Z,{title:"\uc0ad\uc81c\ud558\uae30",children:(0,z.jsx)(x.Z,{color:"primary",onClick:function(){return Ke(!0)},children:(0,z.jsx)(y.Z,{icon:"eva:trash-2-outline"})})})]})}),(0,z.jsx)(v.Z,{children:(0,z.jsxs)(Z.Z,{size:ze.dense?"small":"medium",sx:{minWidth:800},children:[(0,z.jsx)(b.K,{order:ze.order,orderBy:ze.orderBy,headLabel:L,rowCount:Ae.length,numSelected:ze.selected.length,onSort:ze.onSort,onSelectAllRows:function(e){return ze.onSelectAllRows(e,Ae.map((function(e){return e.id})))}}),(0,z.jsxs)(D.Z,{children:[!te&&Ye.map((function(e,t){return(0,z.jsx)(P.kG,{row:e,selected:ze.selected.includes(e.id),onSelectRow:function(){return ze.onSelectRow(e.id)},onViewRow:function(){return ut(e.id)},onEditRow:function(){return ct(e.id)},onRefreshData:function(){return ot()}},e.id)})),!te&&ze.metadata.total>0&&(0,z.jsx)(b.$W,{height:$e,emptyRows:(0,b.fQ)(ze.page,ze.rowsPerPage,ze.metadata.total)}),!te&&(0,z.jsx)(b.et,{notFound:et}),te&&(void 0===Ye||0===Ye.length)&&(0,z.jsx)(b.ZC,{size:ze.metadata.size,denseHeight:$e})]})]})})]}),(0,z.jsx)(b.S_,{count:ze.metadata.total,colSpan:3,page:ze.metadata.currentPage-1,rowsPerPage:ze.metadata.size,onPageChange:ze.onChangePage,onRowsPerPageChange:ze.onChangeRowsPerPage,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},dense:ze.dense,onChangeDense:ze.onChangeDense,ActionsComponent:b.DY})]})]}),(0,z.jsx)(T.Z,{open:Ge,onClose:function(){return Ke(!1)},onDeleteSelected:function(){lt(ze.selected)},selected:ze.selected}),(0,z.jsx)(I.D,{title:"\uc0c8\uae00 \uc791\uc131",open:we,onClose:it,children:(0,z.jsx)(P.qD,{categories:me})}),(0,z.jsx)(I.D,{title:"\uc0c1\uc138 \ubcf4\uae30",open:Pe,onClose:it,onEdit:function(){return ct(De)},onDelete:function(){_e(!0)},children:ce&&(0,z.jsx)(P.tT,{board:ce,categories:me})}),(0,z.jsx)(I.D,{title:"\uc218\uc815 \ud558\uae30",open:qe,onClose:it,onView:function(){return ut(De)},onDelete:function(){_e(!0)},children:ce&&(0,z.jsx)(P.zr,{board:ce,categories:me})}),De&&(0,z.jsx)(R.Z,{open:Ee,dataId:De,onClose:function(){return _e(!1)},onDeleteRow:function(){return dt(De)}})]})}}}]);